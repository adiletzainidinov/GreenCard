(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{600:function(e,t,n){"use strict";var r=n(11),a=n(12),o=n(19),c=n(20),i=n(15),s=n(1),l=n.n(s),u=n(601),b=n.n(u),d=n(0),f=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.type,r=void 0===n?"darkBlue":n,a=e.children,o=e.onClick,c=e.disabled,s=e.style,l=void 0===s?{}:s;return Object(d.jsx)("button",{className:Object(i.a)(b.a[r+"_button"],t),style:l,onClick:o,disabled:c,children:a})}}]),n}(l.a.Component);t.a=f},601:function(e,t,n){e.exports={gradient_button:"FTButton_gradient_button__3XC1A",darkBlue_button:"FTButton_darkBlue_button__OzU84",light_button:"FTButton_light_button__3ixcy",border_button:"FTButton_border_button__1O7Yx"}},612:function(e,t,n){},631:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n(1),o=["title","titleId"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){var n=e.title,s=e.titleId,l=i(e,o);return a.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:12,height:2,ref:t,"aria-labelledby":s},l),n?a.createElement("title",{id:s},n):null,r||(r=a.createElement("rect",{width:12,height:2,x:6,y:11,fillRule:"evenodd",rx:1,transform:"translate(-6 -11)"})))}var l=a.forwardRef(s);n.p},632:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n(1),o=["title","titleId"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){var n=e.title,s=e.titleId,l=i(e,o);return a.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,ref:t,"aria-labelledby":s},l),n?a.createElement("title",{id:s},n):null,r||(r=a.createElement("path",{fillRule:"evenodd",d:"M5 5V1a1 1 0 0 1 2 0v4h4a1 1 0 0 1 0 2H7v4a1 1 0 0 1-2 0V7H1a1 1 0 0 1 0-2h4z"})))}var l=a.forwardRef(s);n.p},649:function(e,t,n){},650:function(e,t,n){},651:function(e,t,n){},652:function(e,t,n){},653:function(e,t,n){},656:function(e,t,n){},781:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Oe}));var r,a,o=n(8),c=n(23),i=n(1),s=n.n(i),l=n(56),u=n(13),b=n(9),d=(n(633),n(634),n(653),["title","titleId"]);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){var n=e.title,o=e.titleId,c=h(e,d);return i.createElement("svg",f({id:"\\u56FE\\u5C42_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 16 16",style:{enableBackground:"new 0 0 16 16"},xmlSpace:"preserve",ref:t,"aria-labelledby":o},c),n?i.createElement("title",{id:o},n):null,r||(r=i.createElement("style",{type:"text/css"},"\n\t.st0{fill:#2B2B2B;}\n")),a||(a=i.createElement("path",{className:"st0",d:"M1.8,12c-0.4,1.1-0.8,2.3-1.8,3.3c1.7,0.5,3.7,0.4,5.1-0.5c0.9-0.5,2-1.6,2.1-3.4L5.3,9.5 C2.8,9.1,2.4,10.2,1.8,12z M15.5,1.8c0.3-0.4,0.4-0.7,0.5-1c0.1-0.2-0.1-0.5-0.4-0.4c-0.2,0.1-0.5,0.2-0.9,0.4C14,1.3,13.1,2,12,2.9 C10.5,4.1,7.3,7.6,6,8.7L8,10.6c1.1-1.2,4.2-4.6,5.3-6C14.2,3.5,15,2.5,15.5,1.8z M15.2,11.5h-4.5c-0.4,0-0.8,0.3-0.8,0.8 s0.3,0.8,0.8,0.8h4.5c0.4,0,0.8-0.3,0.8-0.8S15.7,11.5,15.2,11.5z"})))}var v,j,m=i.forwardRef(p),g=(n.p,["title","titleId"]);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function w(e,t){var n=e.title,r=e.titleId,a=x(e,g);return i.createElement("svg",O({id:"\\u56FE\\u5C42_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 16 16",style:{enableBackground:"new 0 0 16 16"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,v||(v=i.createElement("style",{type:"text/css"},"\n\t.st0{fill:#2B2B2B;}\n")),j||(j=i.createElement("path",{className:"st0",d:"M1.8,12c-0.4,1.1-0.8,2.3-1.8,3.3c1.7,0.5,3.7,0.4,5.1-0.5c0.9-0.5,2-1.6,2.1-3.4L5.3,9.5 C2.8,9.1,2.4,10.2,1.8,12z M15.2,11.5h-1.5V10c0-0.4-0.3-0.8-0.8-0.8s-0.8,0.3-0.8,0.8v1.5h-1.5c-0.4,0-0.8,0.3-0.8,0.8 s0.3,0.8,0.8,0.8h1.5v1.5c0,0.4,0.3,0.8,0.8,0.8s0.8-0.3,0.8-0.8V13h1.5c0.4,0,0.8-0.3,0.8-0.8S15.7,11.5,15.2,11.5z M15.5,1.8 c0.3-0.4,0.4-0.7,0.5-1c0.1-0.2-0.1-0.5-0.4-0.4c-0.2,0.1-0.5,0.2-0.9,0.4C14,1.3,13.1,2,12,2.9C10.5,4.1,7.3,7.6,6,8.7L8,10.6 c1.1-1.2,4.2-4.6,5.3-6C14.2,3.5,15,2.5,15.5,1.8z"})))}var _=i.forwardRef(w),y=(n.p,n(795)),C=n(793),E=n(77),k=n(600),S=n(7),N=n(81),M=n(5),B=n(15),P=(n(656),n(0));var I=function(e){var t=e.className,n=e.style,r=e.options,a=e.value,c=e.onChange,l=e.block,u=e.itemSize,b=e.itemCircel,d=e.size,f=void 0===d?"middle":d,h=s.a.useRef(null),p=Object(i.useRef)({}),v=Object(i.useState)(0),j=Object(o.a)(v,2),m=j[0],g=j[1],O=Object(i.useState)(0),x=Object(o.a)(O,2),w=x[0],_=x[1];return Object(i.useLayoutEffect)((function(){var e=r.find((function(e){return e.value===a}));if(e){var t=Reflect.get(p.current,e.value);t&&(g(t.offsetLeft+4),_(t.offsetWidth))}}),[r,a]),Object(P.jsxs)("div",{className:Object(B.a)("ft-ct-segmented",l&&"ft-ct-segmented__block","ft-ct-segmented__".concat(f),b&&"ft-ct-segmented__circel",t),ref:h,style:n,children:[Object(P.jsx)("div",{className:Object(B.a)("ft-ct-segmented__switch-baner",b&&"ft-ct-segmented__switch-baner__circel"),style:{left:"".concat(m,"px"),width:"".concat(w,"px")}}),Object(P.jsx)("div",{className:"ft-ct-segmented__group",children:r.map((function(e){var t=e.value===a;return Object(P.jsxs)("label",{ref:function(t){return function(e,t){p.current[e]=t}(e.value,t)},className:Object(B.a)("ft-ct-segmented__item",t&&"ft-ct-segmented__item__selected",b&&"ft-ct-segmented__item__circel"),style:u?{width:"".concat(u,"px"),height:"".concat(u,"px")}:{},onClick:function(){return function(e){c(e)}(e.value)},children:[Object(P.jsx)("input",{type:"radio",name:"segmented",className:"ft-ct-segmented__item__input",value:e.value,checked:e.value===a,onChange:function(){}}),Object(P.jsx)("div",{className:"ft-ct-segmented__item__text",children:e.label})]},e.value)}))})]})},L=n(76),R=n(74),V=n(608),Z=n(35),z=Object(R.a)((function(){return n.e(10).then(n.bind(null,641))})),D=[{label:Object(P.jsx)(m,{width:16,height:16}),value:"eraser"},{label:Object(P.jsx)(_,{width:16,height:16}),value:"retain"}];function A(e){var t=e.inputValue,n=e.brushStatus,r=e.onChangeBrushSize,a=e.onChangeBrushStatus,o=e.onAuto,c=e.auto,s=e.isMobile;Object(i.useEffect)((function(){s&&z.preload()}),[s]);var l=function(){E.b.close(),u.b.closeBrush(),u.b.canvasZoomValue=1,document.body.style.overflow="auto",S.a.discardActiveObject(),S.a.clearNeedCanvas()},b=function(){o&&o(),l()},d=function(){var e=E.b.hasUndoRedoState();e&&u.b.setCurrentPage({hasBrushed:!0}),Object(L.d)({position:"cutout_brush_apply",button_status:e?"use_cutout_brush":void 0}),u.b.setCurrentPage({needUploadImage:!0}),l()};return Object(P.jsxs)("div",{className:Object(B.a)("brush_operate",s&&"is_mobile"),children:[Object(P.jsx)("div",{className:"btn_top",children:Object(P.jsx)(V.a,{id:"brush_download",modalButtonId:"brush_download_modal",outSideClick:!1,successModalZIndex:6e3,fromPosition:"changeBackGround",clickCallback:function(){E.b.close()},position:Z.b.BrushDownload,modalStyle:{top:"0px"}})}),Object(P.jsxs)("div",{className:"brush_operate_brush",children:[!s&&Object(P.jsx)("h3",{children:Object(P.jsx)("span",{className:Object(B.a)("brush_operate_auto",!c&&"disabled"),onClick:function(){return o&&o()},children:M.a._("brush_restore")})}),!s&&Object(P.jsxs)("div",{className:"btn_group",children:[Object(P.jsx)("div",{title:M.a._("eraser"),onClick:function(){return a("eraser")},className:Object(B.a)("brush_operate_brush_btn","eraser"===n&&"active"),children:Object(P.jsxs)("span",{children:[Object(P.jsx)(m,{})," ",M.a._("eraser")]})}),Object(P.jsx)("div",{title:M.a._("retain"),onClick:function(){return a("retain")},className:Object(B.a)("brush_operate_brush_btn","retain"===n&&"active"),children:Object(P.jsxs)("span",{children:[Object(P.jsx)(_,{})," ",M.a._("retain")]})})]}),s&&Object(P.jsxs)(N.a,{justify:"space-between",style:{marginBottom:"12px"},children:[Object(P.jsx)(I,{itemSize:32,itemCircel:!0,style:{width:"80px",height:"40px"},options:D,value:n,onChange:a}),Object(P.jsx)("span",{style:{marginRight:"8px"},className:Object(B.a)("brush_operate_auto",!c&&"disabled"),onClick:function(){return o&&o()},children:M.a._("brush_restore")})]}),Object(P.jsxs)("div",{className:"brush_operate_brush_slider_group",children:[Object(P.jsx)("span",{className:"brush_operate_brush_slider_label",children:M.a._("brush_size")}),Object(P.jsx)(y.a,{min:1,max:100,value:t,controls:!1,step:1,onChange:r})]}),Object(P.jsx)(C.a,{min:1,max:100,onChange:r,step:1,tooltip:{formatter:null},value:"number"===typeof t?t:0}),Object(P.jsxs)("footer",{children:[Object(P.jsx)(k.a,{onClick:d,children:M.a._("edit_cutout_apply")}),Object(P.jsx)(k.a,{onClick:b,type:"border",children:M.a._("edit_cutout_cancel")})]})]}),s&&Object(P.jsx)(z,{onApply:d,onClose:b,className:"show_mobile hidden_pc",style:{height:"60px"},children:M.a._("edit_cutout_title")})]})}function X(){var e=s.a.useState(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=s.a.useState(!1),i=Object(o.a)(a,2),d=i[0],f=i[1],h=s.a.useState(20),p=Object(o.a)(h,2),v=p[0],j=p[1],m=s.a.useState(u.b.brushStatus),g=Object(o.a)(m,2),O=g[0],x=g[1];s.a.useEffect((function(){Object(c.f)((function(){r(l.a.isMobile),f(u.b.auto)}))}),[]);var w={inputValue:v,onChangeBrushSize:function(e){var t=Math.round(e);j(t),E.b.defaultBrushSize.value=t},brushStatus:O,onChangeBrushStatus:function(e){u.b.brushStatus=e,E.b.brushStatus=e,x(e)},onCompare:function(e){u.b.compare(e)},onAuto:function(){var e=E.b.hasUndoRedoState();Object(L.d)({position:"cutout_brush_cancel",button_status:e?"use_cutout_brush":void 0}),u.b.setCurrentPage({hasBrushed:!1}),d&&E.b.resetClipCanvas()},auto:d,isMobile:n};return Object(P.jsx)(A,Object(b.a)({},w))}var T,F=n(27),Y=(n(649),n(596),n(651),n(631)),U=n(632),H=["title","titleId"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function J(e,t){var n=e.title,r=e.titleId,a=q(e,H);return i.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",width:16,height:16,viewBox:"0 0 16 16",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,i.createElement("g",{style:{mixBlendMode:"passthrough"}},i.createElement("g",{style:{mixBlendMode:"passthrough"}},T||(T=i.createElement("path",{d:"M0,7.5C0,5.142860000000001,3.5816,2,8,2C12.4184,2,16,5.142860000000001,16,7.5C16,9.857140000000001,12.4184,13,8,13C3.5816,13,0,9.857140000000001,0,7.5ZM5.6,7.50021C5.6,8.80214,6.6744,9.85735,8,9.85735C9.3256,9.85735,10.4,8.80214,10.4,7.50021C10.4,6.19828,9.3256,5.14307,8,5.14307C6.6744,5.14307,5.6,6.19828,5.6,7.50021Z",fillRule:"evenodd",fill:"#2B2B2B",fillOpacity:1})))))}var G=i.forwardRef(J);n.p,n(652);function K(e){var t=s.a.useState([]),n=Object(o.a)(t,2),r=n[0],a=n[1],i=e.onChangeZoomValue;return s.a.useEffect((function(){Object(c.f)((function(){a(u.b.zoomList||[])}))}),[]),Object(P.jsx)("div",{className:"zoom_list",children:Object(P.jsxs)("ul",{children:[r.map((function(e){return Object(P.jsx)("li",{onClick:function(){return i(e.value/100)},children:e.content},e.content)})),Object(P.jsx)("li",{onClick:function(){return i(2*u.b.scaleLimit)},children:M.a._("fit_to_screen")},"fit_to_screen"),Object(P.jsx)("li",{onClick:function(){return i(1)},children:"1:1"},"1:1")]})})}var Q=n(785);function $(){u.b.getImageSize("HD",!1);var e=s.a.useState(u.b.getZoomValue()),t=Object(o.a)(e,2),n=t[0],r=t[1],a=s.a.useState(!1),i=Object(o.a)(a,2),l=i[0],b=i[1];function d(e){u.b.compare(e),e&&u.b.analyzeOperate({position:"bgremove_preview"})}return s.a.useEffect((function(){Object(c.f)((function(){r(u.b.zoomValue)}))})),Object(P.jsxs)("div",{className:"brush_size",children:[Object(P.jsxs)("div",{className:"brush_size_change",children:[Object(P.jsx)("span",{className:"icon",onClick:function(){F.b.getInstance().fireEvent({type:"canvasZoomAddOrLess",data:{type:-1}})},children:Object(P.jsx)(Y.a,{})}),Object(P.jsx)(Q.a,{content:Object(P.jsx)(K,{onChangeZoomValue:function(e){F.b.getInstance().fireEvent({type:"canvasZoomAddOrLess",data:{type:-1,zoomValue:e}})}}),trigger:"click",open:l,placement:"top",style:{zIndex:9999},onOpenChange:function(e){b(e)},children:Object(P.jsx)("span",{className:"brush_size_value",children:"".concat(Math.round(100*n)," %")})}),Object(P.jsx)("span",{className:"icon",onClick:function(){F.b.getInstance().fireEvent({type:"canvasZoomAddOrLess",data:{type:1}})},children:Object(P.jsx)(U.a,{})})]}),Object(P.jsx)("div",{className:"slider"}),Object(P.jsxs)("div",{className:"preview",onMouseDown:function(){return d(!0)},onMouseUp:function(){return d(!1)},children:[Object(P.jsx)(G,{}),Object(P.jsx)("span",{children:M.a._("canvas_botttom_toolbar_preview")})]})]})}n(334),n(650);var ee,te=["title","titleId"];function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne.apply(this,arguments)}function re(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ae(e,t){var n=e.title,r=e.titleId,a=re(e,te);return i.createElement("svg",ne({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,ee||(ee=i.createElement("g",{id:"Icon-/-navigation-/-Undo",stroke:"none",strokeWidth:1,fillRule:"evenodd"},i.createElement("path",{d:"M19.7589263,10.7424045 L14.2737448,5.24175361 C13.9523132,4.91941546 13.431221,4.91941546 13.1097893,5.24175361 C12.7883577,5.56409175 12.7883577,6.08665359 13.1097893,6.40899173 L17.1907643,10.5003759 L12.6501311,10.5003759 C7.88021735,10.5003759 4,14.3915363 4,19.1749024 C4,19.6303563 4.36860419,20 4.82277722,20 C5.27695024,20 5.64555443,19.6303563 5.64555443,19.1749024 C5.64555443,15.3024441 8.78746636,12.1505712 12.6501311,12.1505712 L17.1907643,12.1505712 L13.1097893,16.2430554 C12.7883577,16.5653936 12.7883577,17.0879554 13.1097893,17.4102936 C13.2710537,17.5709126 13.4805876,17.6512221 13.6923156,17.6512221 C13.9029466,17.6512221 14.1135775,17.5709126 14.2737448,17.4102936 L19.7589263,11.9096426 C20.0803579,11.5873045 20.0803579,11.0647427 19.7589263,10.7424045",id:"Fill-1",transform:"translate(12.000000, 12.500000) scale(-1, 1) translate(-12.000000, -12.500000) "}))))}var oe,ce=i.forwardRef(ae),ie=(n.p,["title","titleId"]);function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}function le(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ue(e,t){var n=e.title,r=e.titleId,a=le(e,ie);return i.createElement("svg",se({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,oe||(oe=i.createElement("g",{id:"Icon-/-navigation-/-Redo",stroke:"none",strokeWidth:1,fillRule:"evenodd"},i.createElement("path",{d:"M19.7589263,10.7424045 L14.2737448,5.24175361 C13.9523132,4.91941546 13.431221,4.91941546 13.1097893,5.24175361 C12.7883577,5.56409175 12.7883577,6.08665359 13.1097893,6.40899173 L17.1907643,10.5003759 L12.6501311,10.5003759 C7.88021735,10.5003759 4,14.3915363 4,19.1749024 C4,19.6303563 4.36860419,20 4.82277722,20 C5.27695024,20 5.64555443,19.6303563 5.64555443,19.1749024 C5.64555443,15.3024441 8.78746636,12.1505712 12.6501311,12.1505712 L17.1907643,12.1505712 L13.1097893,16.2430554 C12.7883577,16.5653936 12.7883577,17.0879554 13.1097893,17.4102936 C13.2710537,17.5709126 13.4805876,17.6512221 13.6923156,17.6512221 C13.9029466,17.6512221 14.1135775,17.5709126 14.2737448,17.4102936 L19.7589263,11.9096426 C20.0803579,11.5873045 20.0803579,11.0647427 19.7589263,10.7424045",id:"Fill-1"}))))}var be=i.forwardRef(ue),de=(n.p,n(681));function fe(){var e=s.a.useState(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=s.a.useState(!1),i=Object(o.a)(a,2),b=i[0],d=i[1],f=s.a.useState(!1),h=Object(o.a)(f,2),p=h[0],v=h[1];s.a.useEffect((function(){Object(c.f)((function(){r(l.a.isMobile),d(u.b.hasUndo),v(u.b.hasRedo)}))}),[]);return Object(P.jsxs)("div",{className:"brush_operate_step",children:[Object(P.jsx)(de.a,{title:M.a._("undo"),overlayClassName:"panel_tip_content",arrowPointAtCenter:!0,placement:"bottom",color:"#ffffff",getPopupContainer:function(e){return e},align:{offset:[0,-5]},trigger:n?"contextMenu":"hover",children:Object(P.jsx)("span",{onClick:function(){E.b.undo()},className:Object(B.a)(!b&&"disabled"),children:Object(P.jsx)(ce,{})})}),Object(P.jsx)("div",{className:"slider_h"}),Object(P.jsx)(de.a,{title:M.a._("redo"),overlayClassName:"panel_tip_content",arrowPointAtCenter:!0,placement:"bottom",color:"#ffffff",getPopupContainer:function(e){return e},align:{offset:[0,-5]},trigger:n?"contextMenu":"hover",children:Object(P.jsx)("span",{onClick:function(){E.b.redo()},className:Object(B.a)(!p&&"disabled"),children:Object(P.jsx)(be,{})})})]})}var he=n(4),pe=n(111);function ve(e){var t=e.isMobile,n=void 0!==t&&t,r=s.a.useRef(null),a=s.a.useRef(null),c=s.a.useRef(null),i=s.a.useRef(null),d=s.a.useRef(null),f=s.a.useState(0),h=Object(o.a)(f,2),p=h[0],v=h[1],j=s.a.useState(null),m=Object(o.a)(j,2),g=m[0],O=m[1],x=u.b.getImageSize("HD");function w(e){var t,n,r=e.data.offset,a=r.left,o=r.top,c=u.b.renderRect,s=c.left,l=c.top,b=x.width/x.height,f=u.b.getZoomValue()*u.b.canvasZoomValue;b>1?(t=180,n=200/b):(n=180,t=200*b),s=a/t*x.width*f,l=o/n*x.height*f;var h=i.current,p=h.getBoundingClientRect(),v=p.width,j=p.height;h.style.cssText="top: ".concat(l,"px; left: ").concat(s,"px; width: ").concat(v,"px; height: ").concat(j,"px;"),d.current.style.cssText="top: ".concat(l,"px; left: ").concat(s,"px; width: ").concat(v,"px; height: ").concat(j,"px;"),u.b.renderRect=M(),u.b.offset={top:l,left:s,width:v,height:j}}function _(e){var t=e.data,n=t.type,o=t.zoomValue;if(o)!function(e){var t=u.b.offset,n=c.current.getBoundingClientRect(),o=u.b.getImageSize("HD"),s=o.width,l=o.height;t.width=s*e,t.height=l*e,t.top=(n.height-t.height)/2,t.left=(n.width-t.width)/2,k(t,i.current),k(t,d.current);var b=r.current,f=a.current;u.b.setZoomValue(e/u.b.canvasZoomValue),N(e,b),N(e,f),f.style.visibility="hidden",u.b.renderRect=M(),F.b.getInstance().fireEvent({type:"image_scale_changed"})}(o*u.b.canvasZoomValue);else{var s=0,l=u.b.getZoomValue();if(!L(n)){switch(!0){case l<.1:s=.01*n;break;case l>=.1&&l<=1:s=n*l*.1;break;default:s=.1*n}C((s=I(n,s))*u.b.canvasZoomValue)}}}function y(){if(c.current&&r.current&&a.current){var e=document.getElementById("brush_canvas_wrap").getBoundingClientRect(),t=c.current,n=r.current,o=a.current;t.style.width=e.width+"px",t.style.height=e.height+"px";var s,l,b,f=t.getBoundingClientRect(),h=f.width,p=f.height,v=n.width,j=n.height;h/p/(v/j)>1?(s=(b=Math.round(.9*p))/j,l=b*v/j):(s=(l=Math.round(.9*h))/v,b=l*j/v),N(s,n),N(s,o),o.style.visibility="hidden",u.b.setZoomValue(s/u.b.canvasZoomValue),u.b.scaleLimit||(u.b.scaleLimit=.5*s/u.b.canvasZoomValue,u.b.setZoomList());var m=(h-l)/2,g=(p-b)/2;u.b.offset={left:m,top:g,width:l,height:b},k(u.b.offset,i.current),k(u.b.offset,d.current),u.b.renderRect=M()}}function C(e,t){var n=t?V(t):function(){var e=c.current.getBoundingClientRect();return{x:.5*(e.left+e.right),y:.5*(e.top+e.bottom)}}(),o=n.x,s=n.y,b=u.b.getZoomValue()*u.b.canvasZoomValue,f=u.b.offset;if(b<=2*u.b.scaleLimit*u.b.canvasZoomValue){var h=c.current.getBoundingClientRect(),p=h.width,v=h.height;f.width+=f.width*(e/b),f.height+=f.height*(e/b),f.top=(v-f.height)/2,f.left=(p-f.width)/2}else if(l.a.isMobile&&!t.type){var j=f.width*(e/b),m=f.height*(e/b);f.top-=j/2,f.left-=m/2,f.width+=j,f.height+=m}else f.top-=s*(e/b),f.left-=o*(e/b),f.width+=f.width*(e/b),f.height+=f.height*(e/b);k(f,i.current),k(f,d.current);var g=r.current,O=a.current,x=e+b;u.b.setZoomValue(x/u.b.canvasZoomValue),N(x,g),N(x,O),O.style.visibility="hidden",u.b.renderRect=M(),F.b.getInstance().fireEvent({type:"image_scale_changed"})}s.a.useEffect((function(){if(Object(he.j)()){if(y(),window.addEventListener("resize",y),F.b.getInstance().addEvent("miniMapChanged",w),F.b.getInstance().addEvent("canvasZoomAddOrLess",_),r.current&&a.current){var e=r.current,t=a.current;u.b.specialCanvasEle=e,u.b.compareCanvasEle=t,E.b.init({trackContainer:d.current}),S.a.setNeedClearCanvas(e),S.a.setNeedClearCanvas(t)}return document.body.addEventListener("mouseup",R),document.body.addEventListener("mouseleave",R),document.body.addEventListener("touchend",R),document.body.addEventListener("touchcancel",R),function(){window.removeEventListener("resize",y),F.b.getInstance().removeEvent("miniMapChanged",w),F.b.getInstance().removeEvent("canvasZoomAddOrLess",_),document.body.removeEventListener("mouseup",R),document.body.removeEventListener("touchcancel",R),document.body.removeEventListener("mouseleave",R)}}}),[]);var k=function(e,t){var n=e.top,r=e.left,a=e.width,o=e.height;t.style.cssText="top: ".concat(n,"px; left: ").concat(r,"px; width: ").concat(a,"px; height: ").concat(o,"px;")},N=function(e,t){t.style.transform="scale(".concat(e,")")};function M(){var e=c.current.getBoundingClientRect(),t=i.current.getBoundingClientRect();return{left:t.x-e.x,top:t.y-e.y,width:Math.min(t.right,e.right)-Math.max(t.left,e.left),height:Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)}}function B(e){e.touches||n||(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),requestAnimationFrame((function(){var t=V(e);E.b.operate({isOver:!0,point:t})})))}var I=function(e,t){var n=0,r=u.b.getZoomValue();return 1===e?n=Math.min(t+r,u.b.maxScale)-r:-1===e&&(n=Math.max(t+r,u.b.scaleLimit)-r),n},L=function(e){var t=u.b.getZoomValue();return 1===e&&t>=u.b.maxScale||-1===e&&t<=u.b.scaleLimit};function R(e){E.b.getDown()&&E.b.operate({isDown:!1,point:null}),E.b.downPoint=void 0,E.b.changeDown(!1)}function V(e){var t=i.current.getBoundingClientRect(),n={},r=t.left,a=t.top,o=e.clientX,c=e.clientY;for(var s in t)n[s]=t[s];return Object(b.a)(Object(b.a)(Object(b.a)({},n),t),{},{x:o-r,y:c-a})}function z(e){var t=V(e[0]),n=V(e[1]);return{clientX:(t.x+n.x)/2,clientY:(t.y+n.y)/2}}function D(e){u.b.compare(e),e&&u.b.analyzeOperate({position:Z.c.BgRemoveCompare})}return Object(P.jsxs)("div",{className:"brush_canvas_wrap",id:"brush_canvas_wrap",children:[Object(P.jsxs)("div",{className:"brush_canvas",ref:c,onWheel:function(e){e.preventDefault&&e.preventDefault();var t=e.deltaY>0?-1:1,n=0,r=u.b.getZoomValue();if(!L(t)){switch(!0){case r<.1:n=.01*t;break;case r>=.1&&r<=1:n=t*r*.1;break;default:n=.1*t}C((n=I(t,n))*u.b.canvasZoomValue,e),B(e)}},onMouseDown:function(e){if(!e.touches&&!n){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=V(e);E.b.downPoint=t,E.b.operate({isDown:!0,point:t})}},onMouseMove:B,onMouseUp:function(e){if(!e.touches&&!n){E.b.downPoint=void 0,E.b.changeDown(!1),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=V(e);E.b.operate({isDown:!1,point:t})}},onMouseOut:function(e){if(l.a.isMobile&&e.touches){var t=e.touches||[];if(1===t.length){var n=V(t[0]);E.b.operate({isOver:!1,point:n})}}else{e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var r=V(e);E.b.operate({isOver:!1,point:r})}},onTouchStart:function(e){var t=e.touches||[];if(1===t.length){var n=V(t[0]);E.b.downPoint=n,E.b.operate({isDown:!0,point:n})}},onTouchMove:function(e){if(1===e.touches.length){var t=V(e.touches[0]);E.b.operate({isOver:!0,point:t})}else{var n=function(e){var t=V(e.touches[0]),n=V(e.touches[1]),r=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));return r}(e),r=0;p&&(p-n>2?r=-1:p-n<-2&&(r=1)),v(n),O(e.touches);var a=0,o=u.b.getZoomValue();if(L(r))return;switch(!0){case o<.1:a=.002*r;break;case o>=.1&&o<=1:a=r*o*.02;break;default:a=.02*r}if(C((a=I(r,a))*u.b.canvasZoomValue,z(e.touches)),Math.abs(n-p)<=2){var c=function(e){if(g&&g.length>0){var t=z(e.touches),n=z(g);return{offsetX:t.clientX-n.clientX,offsetY:t.clientY-n.clientY}}return{offsetX:0,offsetY:0}}(e),s=c.offsetX,l=c.offsetY,b=u.b.offset;b.top+=l,b.left+=s,k(b,i.current),k(b,d.current)}E.b.remove()}},onTouchEnd:function(e){E.b.downPoint=void 0,E.b.changeDown(!1);var t=null;e.touches&&e.touches.length>0&&(t=V(e.touches[0])),E.b.operate({isDown:!1,point:t})},children:[Object(P.jsxs)("div",{ref:i,className:"brush_canvas_content",children:[Object(P.jsx)("canvas",{width:null===x||void 0===x?void 0:x.width,height:null===x||void 0===x?void 0:x.height,ref:a}),Object(P.jsx)("canvas",{width:null===x||void 0===x?void 0:x.width,height:null===x||void 0===x?void 0:x.height,ref:r})]}),Object(P.jsx)("div",{ref:d,className:"brush_canvas_track"})]}),Object(P.jsx)("div",{className:"position_redo_undo",children:Object(P.jsx)(fe,{})}),Object(P.jsx)("div",{className:"position_compare",children:Object(P.jsx)(pe.a,{circel:!0,iconOnly:!0,onTouchStart:function(){return D(!0)},onTouchEnd:function(){return D(!1)},children:Object(P.jsx)(G,{width:16,height:16})})}),Object(P.jsx)($,{})]})}var je=n(642);n(612);function me(){var e=Object(i.useCallback)((function(){E.b.close(!0),u.b.closeBrush(),Object(he.m)((function(){u.b.canvasZoomValue=1,document.body.style.overflow="auto",S.a.clearNeedCanvas()}))}),[]);return Object(P.jsxs)("div",{className:"bg_brush",children:[Object(P.jsx)("div",{className:"close_icon",onClick:e,children:Object(P.jsx)(je.a,{})}),Object(P.jsx)(ve,{}),Object(P.jsx)("div",{className:"bg_brush_operate",children:Object(P.jsx)(X,{})})]})}n(3),n(6),n(58);function ge(){return Object(P.jsxs)("div",{className:"bg_brush_mobile",children:[Object(P.jsx)(ve,{isMobile:!0}),Object(P.jsx)("div",{className:"bg_brush_operate",children:Object(P.jsx)(X,{})})]})}function Oe(){var e=s.a.useState(l.a.isMobile),t=Object(o.a)(e,2),n=t[0],r=t[1];return s.a.useEffect((function(){Object(c.f)((function(){r(l.a.isMobile)}))}),[]),n?Object(P.jsx)(ge,{}):Object(P.jsx)(me,{})}}}]);